:root{
  --bg:#f5f7fb;
  --panel:#ffffff;
  --text:#0f172a;
  --muted:#64748b;
  --border:#e5e7eb;
  --shadow: 0 14px 34px rgba(15,23,42,.08);
  --shadow2: 0 8px 18px rgba(15,23,42,.06);
  --radius: 16px;

  --dark:#0b1220;
  --dark2:#111827;
  --darkText:#cbd5e1;

  --accent:#f59e0b;     /* orange CryptoFolio */
  --accent2:#22c55e;    /* vert KPI */
  --danger:#ef4444;
  --info:#3b82f6;
}

*{ box-sizing:border-box; }
html{ scroll-behavior:smooth; }
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Helvetica Neue", sans-serif;
  background: radial-gradient(1200px 600px at 20% 0%, #eef2ff 0%, transparent 45%),
              radial-gradient(900px 500px at 90% 10%, #fff7ed 0%, transparent 50%),
              var(--bg);
  color:var(--text);
}

/* =========================
   TOPBAR
========================= */
.topbar{
  height:66px;
  background: linear-gradient(90deg, var(--dark), var(--dark2));
  color:#fff;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding: 0 18px;
  position: sticky;
  top: 0;
  z-index: 50;
  box-shadow: 0 10px 30px rgba(0,0,0,.18);
}

.topbar__left{
  display:flex;
  align-items:center;
  gap:12px;
}

.logo{
  font-weight: 900;
  letter-spacing:.3px;
  font-size: 16px;
}

.tag{
  font-size:12px;
  color: var(--darkText);
  padding: 7px 10px;
  border-radius: 999px;
  background: rgba(255,255,255,.10);
  border: 1px solid rgba(255,255,255,.12);
}

.topbar__right .chip{
  font-size:12px;
  padding: 7px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.18);
  color: #e5e7eb;
}

/* =========================
   LAYOUT
========================= */
.page{
  display:flex;
  min-height: calc(100vh - 66px);
}

/* =========================
   SIDEBAR
========================= */
.sidebar{
  width: 270px;
  padding: 18px;
  background: rgba(255,255,255,.92);
  border-right: 1px solid var(--border);
  position: sticky;
  top: 66px;
  align-self: flex-start;
  height: calc(100vh - 66px);
  overflow:auto;
  backdrop-filter: blur(6px);
}

.sidebar__title{
  margin: 0 0 12px;
  font-size: 12px;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: .10em;
}

.menu{
  display:flex;
  flex-direction: column;
  gap: 10px;
  margin-bottom: 18px;
}

.menu__link{
  text-decoration:none;
  color: var(--text);
  padding: 11px 12px;
  border-radius: 14px;
  border: 1px solid var(--border);
  background: linear-gradient(180deg, #ffffff, #fbfbfd);
  box-shadow: 0 6px 16px rgba(15,23,42,.05);
  position: relative;
  font-weight: 700;
}

.menu__link:hover{
  transform: translateY(-1px);
  box-shadow: 0 14px 26px rgba(15,23,42,.08);
}

.menu__link--active{
  border-color: rgba(245,158,11,.45);
  background: rgba(245,158,11,.10);
}

.menu__link--active::before{
  content:"";
  position:absolute;
  left: 12px;
  top: 50%;
  width: 9px;
  height: 9px;
  border-radius: 999px;
  background: var(--accent);
  transform: translateY(-50%);
  box-shadow: 0 0 0 6px rgba(245,158,11,.14);
}

/* =========================
   MAIN
========================= */
.main{
  flex:1;
  padding: 20px;
  display:flex;
  flex-direction: column;
  gap: 14px;
}

/* =========================
   HEADLINE
========================= */
.headline{
  background: rgba(255,255,255,.92);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 16px;
  box-shadow: var(--shadow);
  backdrop-filter: blur(6px);
}

.headline h1{
  margin:0;
  font-size: 18px;
  letter-spacing: .2px;
}
.headline p{
  margin: 6px 0 0;
  color: var(--muted);
  max-width: 70ch;
}

/* =========================
   PANEL
========================= */
.panel{
  background: rgba(255,255,255,.92);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 16px;
  box-shadow: var(--shadow);
  backdrop-filter: blur(6px);
}

.panel__head{
  display:flex;
  align-items:flex-end;
  justify-content: space-between;
  gap: 12px;
  flex-wrap: wrap;
  padding-bottom: 8px;
  border-bottom: 1px solid rgba(229,231,235,.6);
}

.panel__head h2{
  margin:0;
  font-size: 16px;
  letter-spacing: .2px;
}
.panel__head p{
  margin: 6px 0 0;
  color: var(--muted);
  font-size: 13px;
  max-width: 80ch;
}

/* =========================
   KPI
========================= */
.kpis{
  display:grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 12px;
  margin-top: 14px;
}

.kpi{
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 14px;
  background: linear-gradient(180deg, #ffffff, #fbfbfd);
  box-shadow: var(--shadow2);
  position: relative;
  overflow:hidden;
}

.kpi::after{
  content:"";
  position:absolute;
  right:-35px;
  top:-35px;
  width:120px;
  height:120px;
  border-radius: 999px;
  background: rgba(34,197,94,.10);
}

.kpi__label{
  margin:0;
  color: var(--muted);
  font-size: 12px;
  font-weight: 700;
  letter-spacing: .02em;
}

.kpi__value{
  margin: 10px 0 0;
  font-size: 22px;
  font-weight: 900;
  font-variant-numeric: tabular-nums;
}

/* =========================
   CHART CARD
========================= */
.chart-card{
  margin-top: 14px;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 14px;
  background: linear-gradient(180deg, #ffffff, #fbfbfd);
  box-shadow: var(--shadow2);
}

.chart-card h3{
  margin: 0 0 10px;
  font-size: 14px;
  font-weight: 900;
  color: #111827;
}

#chartActifs{
  width: 100% !important;
  max-height: 340px;
}

/* =========================
   PLACEHOLDER (zone gris)
========================= */
.placeholder{
  margin-top: 12px;
  padding: 16px;
  border: 1px dashed #cbd5e1;
  border-radius: var(--radius);
  background: #f8fafc;
  color: var(--muted);
}

/* =========================
   FORM (Module Actifs)
========================= */
#ajouter_crypto{
  display:grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 12px;
  background: linear-gradient(180deg,#ffffff,#fbfbfd);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 16px;
  box-shadow: var(--shadow2);
}

#ajouter_crypto label{
  display:block;
  font-size: 12px;
  color: var(--muted);
  margin-bottom: 6px;
  font-weight: 800;
}

#ajouter_crypto input,
#ajouter_crypto select{
  width: 100%;
  height: 44px;
  padding: 0 12px;
  border: 1px solid rgba(229,231,235,.9);
  border-radius: 12px;
  outline: none;
  background: #fff;
  font-size: 14px;
  color: #111827;
  transition: border-color .2s ease, box-shadow .2s ease, transform .08s ease;
}

#ajouter_crypto input:focus,
#ajouter_crypto select:focus{
  border-color: rgba(245,158,11,.85);
  box-shadow: 0 0 0 4px rgba(245,158,11,.18);
  transform: translateY(-1px);
}

#ajouter_crypto button{
  height: 44px;
  border: none;
  border-radius: 12px;
  font-weight: 900;
  cursor: pointer;
  background: linear-gradient(180deg, rgba(245,158,11,1), rgba(245,158,11,.85));
  color: #111827;
  transition: transform .08s ease, filter .2s ease;
  align-self: end;
  box-shadow: 0 14px 22px rgba(245,158,11,.18);
}

#ajouter_crypto button:hover{ filter: brightness(.98); }
#ajouter_crypto button:active{ transform: translateY(1px); }

input::placeholder{ color:#9ca3af; }

/* =========================
   TABLE (Backoffice)
========================= */
#cryptoTable{
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  background: #fff;
  border: 1px solid rgba(229,231,235,.95);
  border-radius: var(--radius);
  overflow: hidden;
  box-shadow: var(--shadow2);
  margin-top: 16px;
}

#cryptoTable thead th{
  text-align:left;
  font-weight: 900;
  font-size: 13px;
  color: #0f172a;
  background: #f7f8fb;
  padding: 12px 14px;
  border-bottom: 1px solid rgba(229,231,235,.9);
  white-space: nowrap;
}

#cryptoTable tbody td{
  padding: 12px 14px;
  font-size: 14px;
  color: #111827;
  border-bottom: 1px solid #eef0f6;
}

#cryptoTable tbody tr{
  transition: transform .08s ease, box-shadow .2s ease, background .2s ease;
}
#cryptoTable tbody tr:hover{
  background: #fafbff;
  transform: translateY(-1px);
  box-shadow: 0 10px 18px rgba(15,23,42,.06);
}

#cryptoTable tbody tr:last-child td{ border-bottom:none; }

#cryptoTable td:nth-child(2){
  font-weight: 900;
  letter-spacing: .3px;
  text-transform: uppercase;
}

#cryptoTable td:nth-child(3),
#cryptoTable td:nth-child(4){
  font-variant-numeric: tabular-nums;
}

#cryptoTable tbody td[colspan]{
  text-align:center;
  color: var(--muted);
  padding: 18px;
}

/* Buttons inside table */
.btn-supprimer,
.btn-modifier{
  padding: 8px 10px;
  border-radius: 12px;
  border: 1px solid rgba(229,231,235,.95);
  background: #fff;
  cursor: pointer;
  font-weight: 900;
  font-size: 12px;
  transition: transform .08s ease, box-shadow .2s ease, border-color .2s ease;
  white-space: nowrap;
}

.btn-modifier:hover{
  border-color: rgba(59,130,246,.55);
  box-shadow: 0 12px 20px rgba(59,130,246,.12);
}

.btn-supprimer:hover{
  border-color: rgba(239,68,68,.55);
  box-shadow: 0 12px 20px rgba(239,68,68,.12);
}

.btn-modifier:active,
.btn-supprimer:active{
  transform: translateY(1px);
}

/* =========================
   ZONE MODIFICATION
========================= */
#modifiere{
  margin-top: 14px;
}

/* Table modifier */
#table-pour-modifier{
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  background: #fff;
  border: 1px solid rgba(229,231,235,.95);
  border-radius: var(--radius);
  overflow: hidden;
  box-shadow: var(--shadow2);
}

#table-pour-modifier thead th{
  background: #f7f8fb;
  padding: 12px 14px;
  font-size: 13px;
  border-bottom: 1px solid rgba(229,231,235,.9);
  white-space: nowrap;
  font-weight: 900;
}

#table-pour-modifier tbody td{
  padding: 10px 14px;
  border-bottom: 1px solid #eef0f6;
}
#table-pour-modifier tbody tr:last-child td{ border-bottom:none; }

#table-pour-modifier input{
  width: 100%;
  height: 42px;
  padding: 0 12px;
  border-radius: 12px;
  border: 1px solid rgba(229,231,235,.95);
  outline: none;
  transition: border-color .2s ease, box-shadow .2s ease;
}

#table-pour-modifier input:focus{
  border-color: rgba(245,158,11,.85);
  box-shadow: 0 0 0 4px rgba(245,158,11,.18);
}

/* bouton enregistrer */
#enregistrer{
  height: 42px;
  border: none;
  border-radius: 12px;
  font-weight: 900;
  cursor: pointer;
  background: linear-gradient(180deg, #111827, #0b1220);
  color: #fff;
  padding: 0 14px;
  box-shadow: 0 14px 20px rgba(17,24,39,.14);
}
#enregistrer:hover{ filter: brightness(.96); }
#enregistrer:active{ transform: translateY(1px); }

/* =========================
   ACCESSIBILITY
========================= */
:focus-visible{
  outline: 4px solid rgba(245,158,11,.22);
  outline-offset: 2px;
  border-radius: 12px;
}

/* =========================
   RESPONSIVE
========================= */
@media (max-width: 1060px){
  .kpis{ grid-template-columns: 1fr; }
}

@media (max-width: 980px){
  .sidebar{ width: 230px; }
  /* Table scroll mobile */
  #cryptoTable{
    display:block;
    overflow-x:auto;
    -webkit-overflow-scrolling: touch;
  }
}

@media (max-width: 900px){
  #ajouter_crypto{ grid-template-columns: 1fr; }
}

@media (max-width: 760px){
  .page{ flex-direction: column; }
  .sidebar{
    width: 100%;
    height: auto;
    position: relative;
    top: 0;
    border-right: none;
    border-bottom: 1px solid var(--border);
  }
}
.api-box{
  margin-top: 12px;
  padding: 14px;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  background: linear-gradient(180deg,#fff,#fbfbfd);
  box-shadow: var(--shadow2);
}

#btn-refresh{
  height: 42px;
  border: none;
  border-radius: 12px;
  font-weight: 900;
  cursor: pointer;
  background: #111827;
  color: #fff;
  padding: 0 14px;
}

#api-status{
  margin: 10px 0 0;
  color: var(--muted);
  font-size: 13px;
}
/* =========================
   FIX TABLE COINGECKO
   (#api-prices est un <tbody> => NE DOIT PAS être display:grid)
========================= */

#api-prices{
  display: table-row-group !important; /* ou display:block aussi marche, mais ça = parfait */
}

#apiTable{
  width: 100%;
  border-collapse: collapse;
  table-layout: fixed;  /* force les colonnes à garder leur place */
}

#apiTable th,
#apiTable td{
  padding: 12px 14px;
  text-align: left;
  vertical-align: middle;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* au cas où une vieille règle met les rows en flex/grid */
#apiTable tr{
  display: table-row !important;
}

#apiTable td{
  display: table-cell !important;
}

/* scroll horizontal si écran petit */
.api-table-wrap{
  overflow-x: auto;
}


.api-row{
  display:flex;
  justify-content: space-between;
  padding: 10px 12px;
  border: 1px solid #eef0f6;
  border-radius: 12px;
  background: #fff;
}
.api-row b{ letter-spacing:.4px; }
/* =========================
   AJOUTS PRO — Recherche / Tri / Stats Portefeuilles
   (sans changer tes IDs)
========================= */

/* zone recherche + bouton (dans #actifs) */
#actifs #re {
  height: 42px;
  padding: 0 12px;
  border: 1px solid #e6e8ef;
  border-radius: 10px;
  background: #fff;
  font-size: 14px;
  color: #111827;
  outline: none;
  width: 260px;
}

#actifs #re:focus {
  border-color: #f59e0b;
  box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.18);
}

#actifs #recherche {
  height: 42px;
  padding: 0 14px;
  border: 1px solid rgba(245, 158, 11, 0.35);
  border-radius: 10px;
  font-weight: 800;
  cursor: pointer;
  background: rgba(245, 158, 11, 0.15);
  color: #111827;
  transition: transform .08s ease, filter .2s ease, background .2s ease;
}

#actifs #recherche:hover {
  filter: brightness(0.98);
  background: rgba(245, 158, 11, 0.22);
}

#actifs #recherche:active {
  transform: translateY(1px);
}

/* si tu gardes #rechercher : style propre */
#actifs #rechercher {
  display: flex;
  gap: 10px;
  align-items: end;
  margin-top: 12px;
  flex-wrap: wrap;
}

/* select tri */
#triActifs {
  margin-top: 14px;
  height: 42px;
  padding: 0 12px;
  border: 1px solid #e6e8ef;
  border-radius: 10px;
  background: #fff;
  font-size: 14px;
  color: #111827;
  outline: none;
  width: 220px;
}

#triActifs:focus {
  border-color: #f59e0b;
  box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.18);
}

/* =========================
   Cards graphiques (chart-card)
========================= */
.chart-card {
  margin-top: 16px;
  border: 1px solid #e6e8ef;
  border-radius: 14px;
  background: #fff;
  box-shadow: 0 10px 26px rgba(17, 24, 39, 0.06);
  padding: 14px;
}

.chart-card h3 {
  margin: 0 0 10px;
  font-size: 14px;
  font-weight: 900;
  color: #111827;
  letter-spacing: .2px;
}

/* canvas plus joli */
#chartActifs,
#chartPortefeuilles {
  width: 100% !important;
  max-height: 320px;
}

/* =========================
   Table Stats Portefeuilles
========================= */
#pfStatsTable {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  border: 1px solid #e6e8ef;
  border-radius: 12px;
  overflow: hidden;
  background: #fff;
}

#pfStatsTable thead th {
  text-align: left;
  font-weight: 800;
  font-size: 13px;
  color: #1f2937;
  background: #f7f8fb;
  padding: 12px 14px;
  border-bottom: 1px solid #e6e8ef;
  white-space: nowrap;
}

#pfStatsTable tbody td {
  padding: 12px 14px;
  font-size: 14px;
  color: #111827;
  border-bottom: 1px solid #eef0f6;
  vertical-align: middle;
}

#pfStatsTable tbody tr:last-child td {
  border-bottom: none;
}

#pfStatsTable tbody tr:hover {
  background: #fafbff;
}

/* aligner chiffres + rendre joli */
#pfStatsTable tbody td:nth-child(2),
#pfStatsTable tbody td:nth-child(3) {
  font-variant-numeric: tabular-nums;
}

/* =========================
   Boutons actions dans tables (supprimer/modifier)
========================= */
.btn-supprimer,
.btn-modifier,
.pf-supprimer {
  height: 34px;
  padding: 0 12px;
  border-radius: 10px;
  border: 1px solid #e6e8ef;
  background: #fff;
  cursor: pointer;
  font-weight: 800;
  font-size: 13px;
  transition: transform .08s ease, box-shadow .2s ease, background .2s ease;
}

.btn-supprimer:hover,
.btn-modifier:hover,
.pf-supprimer:hover {
  box-shadow: 0 8px 18px rgba(17, 24, 39, 0.08);
  background: #fbfbfd;
}

.btn-supprimer:active,
.btn-modifier:active,
.pf-supprimer:active {
  transform: translateY(1px);
}

.btn-supprimer,
.pf-supprimer {
  border-color: rgba(239, 68, 68, 0.25);
  background: rgba(239, 68, 68, 0.08);
}

.btn-modifier {
  border-color: rgba(59, 130, 246, 0.25);
  background: rgba(59, 130, 246, 0.08);
}

/* =========================
   Table de modification / résultats recherche
========================= */
#table-pour-modifier {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  background: #fff;
  border: 1px solid #e6e8ef;
  border-radius: 12px;
  overflow: hidden;
  margin-top: 14px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.04);
}

#table-pour-modifier thead th {
  text-align: left;
  font-weight: 800;
  font-size: 13px;
  color: #1f2937;
  background: #f7f8fb;
  padding: 12px 14px;
  border-bottom: 1px solid #e6e8ef;
  white-space: nowrap;
}

#table-pour-modifier tbody td {
  padding: 12px 14px;
  font-size: 14px;
  color: #111827;
  border-bottom: 1px solid #eef0f6;
}

#table-pour-modifier tbody tr:last-child td {
  border-bottom: none;
}

#table-pour-modifier input {
  width: 100%;
  height: 38px;
  padding: 0 10px;
  border-radius: 10px;
  border: 1px solid #e6e8ef;
  outline: none;
}

#table-pour-modifier input:focus {
  border-color: #f59e0b;
  box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.18);
}

/* bouton enregistrer / fermer dans tables */
#enregistrer,
#fermerr {
  height: 34px;
  padding: 0 12px;
  border-radius: 10px;
  border: none;
  cursor: pointer;
  font-weight: 900;
  background: #111827;
  color: #fff;
  transition: transform .08s ease, filter .2s ease;
}

#enregistrer:hover,
#fermerr:hover {
  filter: brightness(1.05);
}

#enregistrer:active,
#fermerr:active {
  transform: translateY(1px);
}

/* =========================
   Responsive (propre)
========================= */
@media (max-width: 900px) {
  #actifs #re { width: 100%; }
  #triActifs { width: 100%; }
  #actifs #rechercher { width: 100%; }
  .chart-card { padding: 12px; }
}

@media (max-width: 700px) {
  #pfStatsTable thead { display: none; }
  #pfStatsTable, #pfStatsTable tbody, #pfStatsTable tr, #pfStatsTable td {
    display: block;
    width: 100%;
  }
  #pfStatsTable tbody tr {
    border-bottom: 1px solid #eef0f6;
    padding: 10px 12px;
  }
  #pfStatsTable tbody td {
    border-bottom: none;
    padding: 6px 0;
  }
}
/* ===== Détails Actif (card) ===== */
#detailsActif{
  margin-top: 16px;
}

.details-card{
  border: 1px solid #e6e8ef;
  border-radius: 14px;
  background: #fff;
  box-shadow: 0 10px 26px rgba(17,24,39,.06);
  padding: 14px;
}

.details-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 12px;
  margin-bottom: 10px;
}

.details-title{
  margin:0;
  font-size: 15px;
  font-weight: 900;
  color: #111827;
}

.details-sub{
  margin: 4px 0 0;
  font-size: 13px;
  color: #6b7280;
}

.details-grid{
  display:grid;
  grid-template-columns: repeat(3, minmax(0,1fr));
  gap: 10px;
  margin-top: 12px;
}

.details-item{
  border: 1px solid #eef0f6;
  border-radius: 12px;
  padding: 10px;
  background: #fbfbfd;
}

.details-label{
  font-size: 12px;
  color: #6b7280;
  margin:0;
}

.details-value{
  margin: 6px 0 0;
  font-size: 14px;
  font-weight: 800;
  color:#111827;
}

.details-actions{
  display:flex;
  gap: 10px;
  flex-wrap: wrap;
}

#btnCloseDetails{
  height: 34px;
  padding: 0 12px;
  border-radius: 10px;
  border: none;
  cursor: pointer;
  font-weight: 900;
  background: #111827;
  color:#fff;
}

@media (max-width: 900px){
  .details-grid{ grid-template-columns: 1fr; }
}
/* ===== API CoinGecko (table) ===== */
.api-box { margin-top: 10px; }

.api-table-wrap{
  margin-top: 12px;
  border: 1px solid #e6e8ef;
  border-radius: 12px;
  overflow: hidden;
  background: #fff;
}

#apiTable{
  width: 100%;
  border-collapse: collapse;
}

#apiTable thead th{
  text-align: left;
  font-weight: 800;
  font-size: 13px;
  color: #1f2937;
  background: #f7f8fb;
  padding: 12px 14px;
  border-bottom: 1px solid #e6e8ef;
  white-space: nowrap;
}

#apiTable tbody td{
  padding: 12px 14px;
  font-size: 14px;
  border-bottom: 1px solid #eef0f6;
}

#apiTable tbody tr:last-child td{ border-bottom: none; }

#apiTable tbody tr:hover{ background: #fafbff; }

.api-updated{
  margin: 10px 0 0;
  font-size: 12px;
  color: #6b7280;
}
.chart-card canvas{
  display:block;
  width:100% !important;
  height:320px !important;  /* <-- IMPORTANT */
}

.chart-card{
  min-height:380px;         /* <-- IMPORTANT */
}
.chart-card canvas{
  height:320px !important;
}
#apiChartBox canvas{
  display:block;
  width:100% !important;
  height:320px !important;
}
